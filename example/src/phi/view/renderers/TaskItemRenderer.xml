<?xml version="1.0" encoding="utf-8"?>
<ListItemRenderer>

	<Import className="popups.AddNewTaskPopUp" />
	
	<HBox width="100%" 
		  height="35"
		  gap="5"
		  paddingLeft="10">
		  
		<CheckBox id="chk"
				  onMousedown="stopSelectingTask()"
				  onClick="putTaskAsDone()" />
		
		<Label id="taskTitleLb" text="{this.data.label}" width="100%" />
		
		<Image source="assets/images/create.gif"
			   onMousedown="stopSelectingTask()"
			   onClick="showOptionsPopUp()"
			   buttonMode="true" />
			   
		<Image source="assets/images/delete.png" 
			   onClick="deleteTask()" 
			   buttonMode="true" />
			   	   
		<Image source="assets/images/options.png"
			   buttonMode="true" />
	</HBox>
	
	<JavaScript>
		
		putTaskAsDone: function( event )
		{
			event.stopPropagation();
			
			this.taskTitleLb.removeClass('strike');
		
			if( this.chk.getChecked() == true )
				this.taskTitleLb.addClass('strike');
		},
		
		deleteTask: function()
		{
			this.sendMessage("deleteTask", {task: this.data});
		},
		
		showOptionsPopUp: function()
		{
			var popUp = Phi.Mn.PopUpManager.createPopUp( AddNewTaskPopUp, {hideOnClick: false} );
			
			popUp.show( true );
			popUp.center();
		},
		
		stopSelectingTask: function( event )
		{
			event.stop();
		}
	</JavaScript>
</ListItemRenderer>