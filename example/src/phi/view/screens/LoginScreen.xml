<?xml version="1.0" encoding="utf-8"?>
<View onCreationComplete="creationComplete()">
	
	<VBox gap="5"
		  border="0"
		  verticalAlign="middle"
		  horizontalAlign="left">
		  
		<HBox id="errorBox" paddingLeft="100" visible="false">
			<Label text="The username or password is incorrect."
				   color="#ff0000" />
		</HBox>
		
		<HBox border="0">
			<Label text="Username:" width="100" />
			<TextInput id="user" 
					   width="220" 
					   text="{this.model.username}"
					   onEnter="login()" />
		</HBox>
		
		<HBox border="0">
			<Label text="Password:" width="100" />
			<TextInput id="pass" 
					   displayAsPassword="false" 
					   width="220" 
					   text="{this.model.password}"
					   onEnter="login()"/>
		</HBox>
		
		<HBox border="0"
			  gap="4"
			  paddingLeft="100">
			  
			<Button text="Login" style="primary" onClick="login()" />
			<CheckBox />
			<Label id="lb1" text="Stay signed in" />
			
		</HBox>
	</VBox>	
	
	<JavaScript>
		
		messages: {
			logout: 'onLogout'
		},
				
		creationComplete: function()
		{
			this.setModel( new Phi.Mvc.Model({username: "ghalex", password: "parola"}));
		},
		
		login: function()
		{
			var username = this.user.getText();
			var pass = this.pass.getText();
			
			if( username == "ghalex" && pass == "parola")
			{
				this.errorBox.setVisible( false );
				this.sendMessage("loginSuccess", {username: username, pass: pass});
				return; 
			}
			
			this.errorBox.setVisible( true );
			
		},
		
		onLogout: function()
		{
			this.getModel().unset('username');
			this.getModel().unset('password');
		}
		
	</JavaScript>

</View>